<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    
    <section id="quizz060323">
        <div style="width: 100%; display: flex; justify-content: center; padding: 20px;">
            <button type="button" id="openModal" style="border: none; background-color: black; color: white; padding: 10px; cursor: pointer;">open modal</button>
        </div>
        <div class="container_modal_quizz">
            <span class="close_modal">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></svg>
            </span>
            <div class="modal_quizz">
                <div class="body__modal_quizz">
                    <div class="inner__body__modal_quizz">
                        <div id="step_1" class="step active">
                            <h3 class="question">What is your hair color?</h3>
                            <div class="container_image_answer">
                                <div class="image_answer answer">
                                    <input type="radio" name="step_1" id="a">
                                    <label for="a">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/6405b693-d8c4-488f-9caa-7ca41fd16813" alt="">
                                    </label>
                                    <p class="libelle">Blonde</p>
                                </div>
                                <div class="image_answer answer">
                                    <input type="radio" name="step_1" id="b">
                                    <label for="b">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/6405b693-d8c4-488f-9caa-7ca41fd16813" alt="">
                                    </label>
                                    <p class="libelle">Blonde</p>
                                </div>
                                <div class="image_answer answer">
                                    <input type="radio" name="step_1" id="c">
                                    <label for="c">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/6405b693-d8c4-488f-9caa-7ca41fd16813" alt="">
                                    </label>
                                    <p class="libelle">Blonde</p>
                                </div>
                                <div class="image_answer answer">
                                    <input type="radio" name="step_1" id="d">
                                    <label for="d">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/6405b693-d8c4-488f-9caa-7ca41fd16813" alt="">
                                    </label>
                                    <p class="libelle">Blonde</p>
                                </div>
                            </div>
                        </div>

                        <div id="step_2" class="step">
                            <h3 class="question">What is your hair color?</h3>
                            <div class="container_text_answer">
                                <div class="text_answer answer">
                                    <input type="radio" name="step_2" id="e">
                                    <label for="e">
                                        Brown hair is darker than my hair
                                    </label>
                                </div>
                                <div class="text_answer answer">
                                    <input type="radio" name="step_2" id="f">
                                    <label for="f">
                                        Brown hair is darker than my hair
                                    </label>
                                </div>
                                <div class="text_answer answer">
                                    <input type="radio" name="step_2" id="g">
                                    <label for="g">
                                        Brown hair is darker than my hair
                                    </label>
                                </div>

                            </div>
                        </div>

                        <div id="step_3" class="step">
                            <h3 class="question">Your Shade Match</h3>
                            <p class="subquestion">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                            <div class="container_prdt">
                                <div class="prdt_card">
                                    <a href="#" class="prdt_image">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/8ab3343b-14d1-4294-96fa-0a70d568e28d" alt="">
                                    </a>
                                    <a href="#" class="prdt_name">Brow pencil pencil pencil   </a>
                                    <p class="prdt_price">$196</p>
                                    <div class="action_btn">
                                        <button type="button">Add to cart</button>
                                        <button type="button">View Product</button>
                                    </div>
                                </div>
                                <div class="prdt_card">
                                    <a href="#" class="prdt_image">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/8ab3343b-14d1-4294-96fa-0a70d568e28d" alt="">
                                    </a>
                                    <a href="#" class="prdt_name">Brow pencil pencil pencil   </a>
                                    <p class="prdt_price">$196</p>
                                    <div class="action_btn">
                                        <button type="button">Add to cart</button>
                                        <button type="button">View Product</button>
                                    </div>
                                </div>
                                <div class="prdt_card">
                                    <a href="#" class="prdt_image">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/8ab3343b-14d1-4294-96fa-0a70d568e28d" alt="">
                                    </a>
                                    <a href="#" class="prdt_name">Brow pencil pencil pencil   </a>
                                    <p class="prdt_price">$196</p>
                                    <div class="action_btn">
                                        <button type="button">Add to cart</button>
                                        <button type="button">View Product</button>
                                    </div>
                                </div>
                                <div class="prdt_card">
                                    <a href="#" class="prdt_image">
                                        <img src="https://octaneairsrc.com/zzonorbjl5bge9pa/quizimg/8ab3343b-14d1-4294-96fa-0a70d568e28d" alt="">
                                    </a>
                                    <a href="#" class="prdt_name">Brow pencil pencil pencil   </a>
                                    <p class="prdt_price">$196</p>
                                    <div class="action_btn">
                                        <button type="button">Add to cart</button>
                                        <button type="button">View Product</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                </div>

                <div class="footer__modal_quizz">
                    <div class="container_progress_bar">
                        <p class="percentage">
                            0% complete
                        </p>
                        <div class="progress_bar">
                            <div class="innner__progres_bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="btn_container">
                        <button type="button" class="prev_btn disabled">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M8 12l6-6v12z" /></svg>
                        </button>
                        <button type="button" class="next_btn disabled">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M16 12l-6 6V6z"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        let stepIndex = 0;
        let progressBar = document.querySelector('#quizz060323 .innner__progres_bar');
        let percentage = document.querySelector('#quizz060323 .percentage');
        let openModal = document.querySelector('#quizz060323 #openModal');
        let nextBtn = document.querySelector('#quizz060323 .next_btn');
        let prevBtn = document.querySelector('#quizz060323 .prev_btn');
        let closeModal = document.querySelector('#quizz060323 .close_modal');
        let steps = document.querySelectorAll('#quizz060323 .step');
        let containerModal = document.querySelector('#quizz060323 .container_modal_quizz');


        openModal.addEventListener('click', function(e) {
            e.preventDefault();
            containerModal.classList.add('open');
        });

        closeModal.addEventListener('click', function(e) {
            e.preventDefault();
            containerModal.classList.remove('open');
        });

        prevBtn.addEventListener('click', function(e) {
            e.preventDefault();
            if(stepIndex > 0){
                steps[stepIndex].classList.remove('active');
                steps[stepIndex - 1].classList.add('active');
                stepIndex = stepIndex - 1;
                verifBtnProgess();
            }
            
        });

        nextBtn.addEventListener('click', function(e) {
            e.preventDefault();
            if(((stepIndex + 1) < steps.length) && steps[stepIndex].classList.contains('complete')){
                steps[stepIndex].classList.remove('active');
                steps[stepIndex + 1].classList.add('active');
                stepIndex = stepIndex + 1;
                verifBtnProgess();
            }
        });

        steps.forEach((step, index) => {
            step.querySelectorAll('.answer').forEach((answer, ansIndex) => {
                answer.addEventListener('click', function(e) {
                    steps.forEach((curStep, curStepIndex) => {
                        if(curStep == steps[index + 1]){
                            curStep.classList.add('active');
                            steps[curStepIndex -1].classList.add('complete');
                            stepIndex = curStepIndex;
                            verifBtnProgess();
                        }else{
                            curStep.classList.remove('active');
                        }
                    });
                });
            });
        });

        containerModal.addEventListener("click", async function (e) {
            let clickInside = containerModal.querySelector('.modal_quizz').contains(e.target)
            if (!clickInside) {
                containerModal.classList.remove('open');
            }
        });

        function verifBtnProgess() {
            if(stepIndex == 0){
                prevBtn.classList.add('disabled')
            }else {
                prevBtn.classList.remove('disabled')
            }

            if(stepIndex + 1 == steps.length){
                nextBtn.classList.add('disabled');
            }
            
            if(steps[stepIndex].classList.contains('complete')){
                nextBtn.classList.remove('disabled');
            }
            percentage.innerHTML =  Math.round((100 / steps.length) * (stepIndex+1)) + '% complete';
            progressBar.style.width = Math.round((100 / steps.length) * (stepIndex+1)) + '%';
        }
    </script>
</body>
</html>
